---
- name: Set hostname on "{{ inventory_hostname_short }}"
  hostname:
    name: "{{ inventory_hostname }}"

- name: Install packages
  apt:
    pkg:
      - neovim
      - zsh
      - zsh-syntax-highlighting
      - tmux
      - nfs-common
    update_cache: yes
    autoclean   : yes
    autoremove  : yes
  become: yes

- include_tasks: update.yml

- name: Clone dotfiles
  git:
    repo    : https://gitlab.com/wiggins.jonathan/dotfiles.git
    dest    : "{{ HOME }}/dotfiles"
    version : headless

- name: Set dotfiles installer as executable
  file:
    path: "{{ HOME }}/dotfiles/installer.sh"
    mode: 755

- name: Deploy dotfiles
  shell:
    cmd   : ./installer.sh
    chdir : "{{ HOME }}/dotfiles"
  become: yes
